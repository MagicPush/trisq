[In English 🇬🇧](README.md)

# Игра "Trisq"

## О проекте

Мы хотим разработать новую игру под названием "Trisq" (triangles and squares - треугольники и квадраты).

Пока что это должно быть консольным приложением, без сохранения состояния между запусками (stateless).
- Аргументы, переданные программе (`play.php`), воспринимаются как ходы игроков:
  `ход_игрока1 ход_игрока2 ход_игрока1 ход_игрока2 ...`
- Игроки делают ходы на основе европейского стиля координат ("A1"). Обратите внимание, что при таком стиле отсутствует
  колонка `i` (следом за `h` идёт сразу колонка `j`) - чтобы избежать возможной путаницы при чтении схожих
  по начертанию символов `i` и `j`.
- Приложение должно отражать состояние доски на основе совершённых игроками ходов и реализованных правил.

Пример:
```
$ php play.php a13 c12
   a  b  c  d  e  f  g  h  j  k  l  m  n
13 ▲  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·
12 ·  ·  □  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·
11 ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·
10 ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·
 9 ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·
 8 ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·
 7 ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·
 6 ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·
 5 ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·
 4 ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·
 3 ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·
 2 ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·
 1 ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·  ·
```

Вам нужно изменить проект, реализовав логику, описанную в приведённых ниже задачах.

## Задача 1

Реализовать основную механику расстановки фигур:
1. Изначально доска должна быть пустой.
2. Первыми ходят треугольники.
3. Каждый игрок размещает строго 1 фигуру в свой ход. Следующий ход совершает другой игрок (другой фигурой).
4. Нельзя ставить фигуру поверх / вместо уже установленной на той же клетке.
   В таком сценарии нужно выбросить исключение.
5. Отражать совершённые ходы на доске - вывести корректно заполненную доску в консоль.

Когда выполните задачу, проверьте свой код:
```shell
./phpunit.phar --group=task1
```

## Задача 2

Реализовать механики захвата:
1. Упрощённый захват: удалите (захватите) одну фигуру противника, если эта фигура окружена фигурами текущего игрока
   по горизонтали и вертикали или стенками доски.
    * Захват цепочки фигур одного типа реализовывать не нужно.
      В рамках данной задачи вы всегда будете захватывать строго 1 фигуру.

    ```
     ·  ·  ·  ·  ·       ·  ·  ·  ·  ·       ·  ·  ·  ·  · 
     ·  ·  ▲  ·  ·       ·  ·  ▲  ·  ·       ·  ·  ▲  ·  · 
     ·  ▲  □  ·  ·       ·  ▲  □  ▲  ·       ·  ▲  ·  ▲  · 
     ·  ·  ▲  ·  ·       ·  ·  ▲  ·  ·       ·  ·  ▲  ·  · 
     ·  ·  ·  ·  ·       ·  ·  ·  ·  ·       ·  ·  ·  ·  · 
          До         Добавлен треугольник   Захвачен квадрат
    ```

    ```
     ·  ·  ·  ·  ·       ·  ·  ·  ·  ·       ·  ·  ·  ·  · 
     □  ·  ·  ·  ·       □  ·  ·  ·  ·       □  ·  ·  ·  · 
     ▲  □  ·  ·  ·       ▲  □  ·  ·  ·       ·  □  ·  ·  · 
     ·  ·  ·  ·  ·       □  ·  ·  ·  ·       □  ·  ·  ·  · 
     ·  ·  ·  ·  ·       ·  ·  ·  ·  ·       ·  ·  ·  ·  · 
          До            Добавлен квадрат   Захвачен треугольник
    ```
2. Запретить самозахват: выбросить исключение, если в течение хода игрока добавленная фигура будет тут же захвачена
   окружающими её фигурами противника или стенками доски.
   
   Стоит учесть, что захват фигур противника происходит перед самозахватом.

    ```
     ·  ·  ·  ·  ·       ·  ·  ·  ·  ·       ·  ·  ·  ·  · 
     ·  ·  ▲  ·  ·       ·  ·  ▲  ·  ·       ·  ·  ▲  ·  · 
     ·  ▲  ·  ▲  ·       ·  ▲  □  ▲  ·       ·  ▲  ·  ▲  · 
     ·  ·  ▲  ·  ·       ·  ·  ▲  ·  ·       ·  ·  ▲  ·  · 
     ·  ·  ·  ·  ·       ·  ·  ·  ·  ·       ·  ·  ·  ·  · 
          До            Добавлен квадрат    Захвачен квадрат
    ```
3. Запретить доске оказываться в состоянии идентичном ближайшему предыдущему,
   чтобы исключить возможность бесконечных взаимных захватов.

   Ход является недопустимым, если в его результате на доске оказываются те же фигуры по тем же координатам,
   что и 2 хода назад (то же состояние доски для того же игрока):

    ```
     ·  ·  ·  ·  ·       ·  ·  ·  ·  ·       ·  ·  ·  ·  · 
     ·  ▲  ▲  ·  ·       ·  ▲  ▲  ·  ·       ·  ▲  ▲  ·  · 
     ·  ·  □  ·  ·       ·  ·  □  ·  ·       ·  ·  □  ·  · 
     ·  ·  ·  □  ▲       ·  ·  ·  □  ▲       ·  ·  ·  □  ▲ 
     ·  ·  □  ▲  ·       ·  ·  □  ·  □       ·  ·  □  ▲  · 
          До          Захвачен треугольник  Захвачен квадрат
                                                    ^
                                                    |
                               Недопустимый ход: то же состояние, что и в "До".
                При таком раскладе игроки могут бесконечно захватывать фигуры друг у друга.
    ```

Когда выполните задачу, проверьте свой код:
```shell
./phpunit.phar --group=task2
```
